#! /usr/bin/env python
import pygame
import RPi.GPIO as gpio
import time
pygame.init()
width = 256
height = 248
face=[140,40,142,80,130,100,110,110,100,100,90,100,75,90,70,70,70,50, \
 75,35,95,30,100,20,115,25,120,28,126,20,128,25,135,30,140,20,140,40]
hair=[40,120,37,117,35,114,40,110,40,106,44,100,44,104,44,100,37,97,39,\
 80,45,72,40,69,45,55,50,52,45,38,50,25,60,12,66,9,90,6,95,10,97,\
 4,97,4,130,2,135,6,147,14,147,20,153,27,158,40,154,45,160,50,165,\
 53,170,70,171,75,160,78,170,82,171,85,180,124]
neck=[75,90,75,110,95,130,133,115,133,99,147,108,178,120]
nose=[135,45,131,43,123,43,117,47,128,70,125,74,123,72,118,71]
eyebrow=[118,47,113,45,100,45,95,48]
mouth=[110,88,112,86,124,84,132,84]
eyeleft=[111,53,108,50,99,54,108,60,111,53]
eyeright=[132,52,129,49,120,53,129,59,132,52]
frequency=[110,116.5,123.5,130.8,138.6,146.8,155.6,164.6,174.6,185,196,207.7,\
 220,233.3,246.9,261.1,277.2,293.7,311.1,329.6,349.2,370,392,415.3,\
 440,466.2,493.9,523.2,554.4,587.3,622.3,659.3,698.5,740,784,830.6,\
 880,932.3,987.8,1046.5,1108.7,1174.7,1244.5,1318.5,1396.9,1480,1568,\
 1661.2,1760,1864.6,1975.5,2093,2217.5,2349.3,2489,2637,2793.9,2959.6,\
 3135.9,3322.4]
duration=[909,857.3,809.7,764.5,721.5,681.2,642.7,606.8,572.7,540.5,510.2,\
 481.5,454.5,428.6,405,383,369.7,340.5,321.5,303.4,270.3,255,240.8,\
 227.3,214.5,202.5,191,180.3,170.3,160.7,151.7,143.2,135,127.5,120.4,\
 113.6,107.3,101.3,95.5,90.2,85.3,80.3,75.8,71.6,67.5,63.8,60.2,56.8,\
 53.6,50.6,47.8,45,42.6,40.2,37.9,35.8,33.8,31.9,30]
welltemperedclavier=[10,14,17,22,26,17,22,26,10,14,17,22,26,17,22,26,10,\
 12,19,24,27,19,24,27,10,12,19,24,27,19,24,27,9,12,17,\
 24,27,17,24,27,9,12,17,24,27,17,24,27,10,14,17,22,26,17,\
 22,26,10,14,17,22,26,17,22,26,10,14,19,26,31,19,26,31,\
 10,14,19,26,31,10,9,26,31,10,12,16,19,24,16,19,24,10,12,\
 16,19,24,16,19,24,9,12,17,24,29,17,24,29,9,12,17,24,29,\
 17,24,29,9,10,14,17,22,14,17,22,9,10,14,17,22,14,17,22,\
 7,10,14,17,22,14,17,22,7,10,14,17,22,14,17,22,12,7,12,\
 16,22,12,16,22,12,7,12,16,22,12,16,22,5,9,12,17,21,12,\
 17,21,5,9,12,17,21,12,17,21,5,8,14,17,23,14,17,23,5,8,\
 14,17,23,14,17,23,3,7,12,19,24,12,19,24,3,7,12,19,24,12,\
 19,24,3,6,12,15,21,12,15,21,3,6,12,15,21,12,15,21,2,5,10,\
 17,22,10,17,22,2,5,10,17,22,10,17,22,14,15,19,22,27,\
 19,22,27,14,15,19,22,27,19,22,27,12,15,19,22,27,19,22,\
 27,12,15,19,22,27,19,22,27,5,12,17,21,27,17,21,27,5,12,\
 17,21,27,17,21,27,10,14,17,22,26,17,22,26,10,14,17,22,\
 26,17,22,26,10,17,20,22,26,20,22,26,10,17,20,22,26,20,\
 22,26,3,15,19,22,26,19,22,26,3,15,19,22,26,19,22,26,4,\
 10,19,22,25,19,22,25,4,10,19,22,25,19,22,25,6,15,21,22,\
 24,21,22,24,6,15,21,22,24,21,22,24,5,15,17,21,24,17,21,\
 24,5,15,17,21,24,17,21,24,5,14,17,22,26,17,22,26,5,14,\
 17,22,26,17,22,26,5,12,17,22,27,17,22,27,5,12,17,22,27,\
 17,22,27,5,12,17,21,27,17,21,27,5,12,17,21,27,17,21,27,\
 5,13,19,22,28,19,22,28,5,13,19,22,28,19,22,28,5,14,17,\
 22,29,17,22,29,5,14,17,22,29,17,22,29,5,12,17,22,27,17,\
 22,27,5,12,17,22,27,17,22,27,5,12,17,21,27,17,21,27,5,\
 12,17,21,27,17,21,27,10,10,17,20,26,17,20,26,10,10,17,\
 20,26,17,20,26,10,10,15,19,22,27,22,19,22,19,15,19,15,\
 12,15,12,10,9,17,21,24,27,24,21,24,21,17,21,12,15,14,12]
screen = pygame.display.set_mode((width, height))
white = pygame.Color("white")
for i in range(0,len(face)-2,2):
 pygame.draw.line(screen,white,(face[i],face[i+1]),(face[i+2],face[i+3]))
 pygame.display.flip()
 time.sleep(0.05)
for i in range(0,len(hair)-2,2):
 pygame.draw.line(screen,white,(hair[i],hair[i+1]),(hair[i+2],hair[i+3]))
 pygame.display.flip()
 time.sleep(0.05)
for i in range(0,len(neck)-2,2):
 pygame.draw.line(screen,white,(neck[i],neck[i+1]),(neck[i+2],neck[i+3]))
 pygame.display.flip()
 time.sleep(0.05)
for i in range(0,len(nose)-2,2):
 pygame.draw.line(screen,white,(nose[i],nose[i+1]),(nose[i+2],nose[i+3]))
 pygame.display.flip()
 time.sleep(0.05)
for i in range(0,len(eyebrow)-2,2):
 pygame.draw.line(screen,white,(eyebrow[i],eyebrow[i+1]),(eyebrow[i+2],eyebrow[i+3]))
 pygame.display.flip()
 time.sleep(0.05)
for i in range(0,len(mouth)-2,2):
 pygame.draw.line(screen,white,(mouth[i],mouth[i+1]),(mouth[i+2],mouth[i+3]))
 pygame.display.flip()
 time.sleep(0.05)
for i in range(0,len(eyeleft)-2,2):
 pygame.draw.line(screen,white,(eyeleft[i],eyeleft[i+1]),(eyeleft[i+2],eyeleft[i+3]))
 pygame.display.flip()
 time.sleep(0.05)
for i in range(0,len(eyeright)-2,2):
 pygame.draw.line(screen,white,(eyeright[i],eyeright[i+1]),(eyeright[i+2],eyeright[i+3]))
 pygame.display.flip()
 time.sleep(0.05)
myfont = pygame.font.SysFont("monospace",14)
pupil = myfont.render("*",1,(255,0,0))
screen.blit(pupil,(103,48))
screen.blit(pupil,(125,48))
tl1 = myfont.render("PRELUDE from the WELL-TEMPERED", 1, (0,255,0))
tl2 = myfont.render("CLAVIER by J.S. Bach", 1, (0,255,0))
tl3 = myfont.render("Ported from LynxBasic to Python", 1, (0,255,0))
tl4 = myfont.render("For Pibrella by ukscone", 1, (0,255,0))
screen.blit(tl1,(3,170))
screen.blit(tl2,(3,185))
screen.blit(tl3,(3,199))
screen.blit(tl4,(3,215))
pygame.display.flip()
PIEZOSPEAKER = 18
gpio.setmode(gpio.BCM)
gpio.setwarnings(True)
gpio.setup(PIEZOSPEAKER,gpio.OUT)
p = gpio.PWM(PIEZOSPEAKER,300)
p.start(1)
for x in xrange(0,len(welltemperedclavier)):
 p.ChangeFrequency(frequency[welltemperedclavier[x]])
 time.sleep(duration[welltemperedclavier[x]]*0.001)
p.stop()
gpio.cleanup()
pygame.quit()
